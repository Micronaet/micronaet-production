<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
       <!-- mrp.production.create.wizard -->
       <record id="mrp_production_create_wizard_view" model="ir.ui.view">
            <field name="name">Create production order</field>
            <field name="model">mrp.production.create.wizard</field>
            <field name="arch" type="xml">
                <form string="Create MRP" version="7.0">
                   <header>
                       <button string="Cancel" special="cancel" />
                       <button name="action_create_mrp_production_order" string="Create" type="object" icon="gtk-jump-to" class="oe_highlight" attrs="{'invisible':[('error','=',True)]}"/>
                   </header>              
                   <group colspan="4" col="4">
                        <field name="product_tmpl_id" />
                        <field name="product_id"/> <!-- invisible="1"-->
                        <newline />
                        
                        <field name="operation" />
                        <field name="production_id" attrs="{'invisible': [('operation','=','create')], 'required': [('operation','!=','create')]}" domain="[('product_id','=',product_id)]"/>
                        <newline />
                        
                        <field name="bom_id" domain="[('product_tmpl_id','=',product_tmpl_id)]"/>
                        <field name="item_hour" attrs="{'required': [('bom_id','=',False)]}"/>
                        <field name="from_deadline" />
                        <field name="to_deadline" />
                        <field name="oc_total" />
                        <field name="total" />

                        <field name="is_error" invisible="1" />
                        <notebook colspan="4">
                            <page string="Error" attrs="{'invisible': [('is_error','=',False)]}">
                               <group>
                                   <field name="error" attrs="{'invisible': [('error','=',False)]}" readonly="1"/>
                                   <field name="warning" attrs="{'invisible': [('warning','=',False)]}" readonly="1"/>
                               </group>                                
                            </page>
                            <page string="Order">
                               <group>
                                   <field name="name" widget="html" readonly="1" nolabel="1"/>
                               </group>   
                            </page>                            
                        </notebook>
                   </group>
                </form>
            </field>
      </record>

    <act_window
        id="act_window_mrp_production_create_wizard_view"
        name="Create production"
        view_mode="form"
        target="new"
        res_model="mrp.production.create.wizard"
        key2="client_action_multi"
        context="{'grouping':'family'}"
        src_model="sale.order.line"/>
    </data>
</openerp>
